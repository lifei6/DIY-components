# DIY-components
自己封装的组件库

# 目录
## react组件
### indictor为指示器

--------
功能
:    轮播图下面的小圆点或者小图列表等
---------
1. 使用
------------------
需要父组件传递参数
|name|description|example value|
|:----:|:--------|:----|
|children|父组件传递过来的结构（插槽），通常为列表遍历，为滑块的组成单元|div列表、img列表、自定义组件列表|
|curIndex|当前选中单元索引|index|
--------------------
之后父元素只需要设置对应指示器宽度就可以使用了

2. 样式部分实现原理
+ 在最外层包裹一个容器（外容器）超出部分hidden，用来确定需要展示的宽度（这个宽度由父元素width确定），开启相对定位（方便之后计算偏移量）
+ 内容器开启浮动，设置子元素不压缩（flex-shrink:0,因为浮动默认是会压缩的，而我们需要一个不压缩的实际可滚动的大小，不然直接被压缩成设置的外容器大小，导致没有滚动的余地）；动态的移动内容器，并添加移动动画

3. 组件原理
+ 获取内容器
+ 获取当前应居中的元素（单元）
+ 计算元素相关属性offsetLeft(偏移量相对于最近的开启定位的祖先元素);元素的宽度（可见clientWidth大小）
+ 计算内容器（被隐藏时的）大小（clientWidth为被父元素隐藏后的可见大小）和scrollWidth可滚动大小
+ 计算内容器应左右移动的距离translateDistant(负代表不需要移动的元素)；需要考虑左边极限和右边极限情况（这里默认循环）
+ 动态改变容器移动的样式（css in js直接以参数传递给样式组件）（也可以获取dom去改变样式）


### scroll-view为滑动栏
--------
功能
:    点击左右按键，每次滑动一个，滑动单元可以等宽也可以不等宽，会自动计算滑动距离，并且在显示的内容不够滑动区域的宽度时会隐藏右边按钮，左边处于第一个会隐藏左边按钮
---------
1. 使用
------------------
需要父组件传递参数
|name|description|example value|
|:----:|:--------|:----|
|children|父组件传递过来的结构（插槽），通常为列表遍历，为滑块的组成单元|div列表、img列表|
|imgAddClass|传递过来的是图片列表时额外添加的属性|true/false(默认)|
------------------
之后父元素只需要设置对应滑动栏宽度就可以使用了

2. 样式部分原理
+ 左右按钮（图标）用绝对定位固定在两边，更具滑块的状态确定是否显示和隐藏
+ 外容器开启相对定位，设置超出部分hidden；根据是否传入imgAddClass决定动态添加左右外边距-8px(**对齐作用**)
+ 内容器开启浮动设置不压缩；根据当前状态动态的偏移和偏移时的动画

3. 组件原理
+ 组件挂载完毕，计算外容器实际宽度（可滚动的宽度）、显示的宽度（隐藏部分后的可见宽度）、计算出隐藏宽度（我们可以滑动的最大距离），大于零显示右边按钮
+ 按钮点击后进行事件处理：1.左边按钮设置索引加1；2.右边按钮设置索引-1；3.计算出索引对应元素的左侧偏移量；4.判断左右按钮是否显示；5.更新维护的显示为第一个元素的索引和偏移量
+ 根据偏移量去动态改变内容器的左侧移动距离样式



### picture-brouser为图片浏览器
--------
功能
:    弹出一个黑色遮罩层，在顶部有退出按钮，中间为高度固定，宽度自适应的大图轮播(这里为一个img的url改变)，地下是可隐藏的小图指示器(借助了indictor组件)
---------
1. 使用
------------------
需要父组件传递参数
|name|description|example value|
|:----:|:--------|:----|
|pictureUrls|用于轮播的图片地址列表|['img1_url','img2_url'...]|
|setShowBrouser|是否显示图片浏览器，用于在点击退出时通知父组件修改该状态|父给子绑定的函数|
------------------

2. 组件原理
+ 渲染完成取消滚动条，组件销毁恢复滚动条
+ 左右按钮点击事件设置新索引，需判断左右极限情况，需判断动画的走向
+ 指示器中元素点击事件处理，判断动画走向，设置新索引
+ 点击指示器显示与隐藏按钮，给予一个过渡动画(这里注意是高度向下变化，因此需固定盒子的底边，用绝对定位)


## vue组件
### Pagination为分页器

--------
功能
:    实现分页功能
---------
1. 使用
------------------
需要父组件传递参数
|name|description|example value|
|:----:|:--------|:----|
|pageNo|当前页码|index|
|pageSize|一页数据个数|size|
|total|总的数据条数|totalSize|
|continues|分页器中间显示几个页面|5,7|
--------------------
传入参数即可使用

2. 原理

需要计算的数据
:   总页数

        Math.ceil(this.total/this.pageSize)

:   开始页码和结束页码
    
        startNumAndEndNum(){
            const {pageNo,continues,totalPage} = this
            let start = 0,end=0;
            if(continues>totalPage){
                start = 1
                end = totalPage
            }else{
                start = pageNo - parseInt(continues/2)
                end = pageNo + parseInt(continues/2)
                if(start<1){
                    start = 1
                    end = continues
                }else if(end>totalPage){
                    start = totalPage - continues + 1
                    end = totalPage
                }
            }
            return {start,end}
        }

:   点击页码触发网络请求事件

        pageHandler(page){
            this.$emit('getPageNo',page)
        }